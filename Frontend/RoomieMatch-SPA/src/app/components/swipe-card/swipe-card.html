<div class="card" [ngClass]="{'swiping-left': swipeDirection === 'left', 'swiping-right': swipeDirection === 'right'}">

    <!-- ROOM CARD: For HAS_ROOM users (showing their room) -->
    <ng-container *ngIf="user.userType === 'HAS_ROOM'">
        <div class="card-image"
            [style.background-image]="(user.room?.roomImage ? 'url(' + user.room?.roomImage + ')' : (user.profileImage ? 'url(' + user.profileImage + ')' : null))"
            [class.has-image]="user.room?.roomImage || user.profileImage">
            <span *ngIf="!user.room?.roomImage && !user.profileImage">{{ user.firstName[0] }}</span>
            <div class="price-tag" *ngIf="user.room?.rent">
                {{ user.room?.rent | currency:'DKK':'symbol':'1.0-0' }}/mo
            </div>
        </div>
        <div class="card-content">
            <div class="room-details" *ngIf="user.room?.title">
                <h4 class="room-title">{{ user.room?.title }}</h4>
                <p class="room-specs">
                    <span *ngIf="user.room?.location">ğŸ“ {{ user.room?.location }}</span>
                    <span *ngIf="user.room?.sizeSqm"> Â· {{ user.room?.sizeSqm }}mÂ²</span>
                </p>
            </div>
            <div class="header">
                <div class="user-info">
                    <h3 class="name">{{ user.firstName }}, <span class="age">{{ user.age }}</span></h3>
                </div>
                <span class="badge badge-has-room">Has Room</span>
            </div>
            <p class="bio">{{ user.bio || 'No details provided.' }}</p>
        </div>
    </ng-container>

    <!-- PERSON CARD: For NEEDS_ROOM users (no room, just person info) -->
    <ng-container *ngIf="user.userType === 'NEEDS_ROOM'">
        <div class="card-image person-card-image"
            [style.background-image]="user.profileImage ? 'url(' + user.profileImage + ')' : null"
            [class.has-image]="user.profileImage">
            <span *ngIf="!user.profileImage" class="avatar-initial">{{ user.firstName[0] }}</span>
        </div>
        <div class="card-content person-content">
            <div class="header">
                <div class="user-info">
                    <h3 class="name">{{ user.firstName }}, <span class="age">{{ user.age }}</span></h3>
                    <p class="user-gender" *ngIf="user.gender">{{ user.gender }}</p>
                </div>
            </div>

            <div class="person-details">
                <p class="bio">{{ user.bio || 'No bio provided.' }}</p>
            </div>
        </div>
    </ng-container>

    <!-- Action buttons (same for both) -->
    <div class="actions">
        <button class="btn-action btn-pass" (click)="onPass($event)">
            <span>âœ•</span>
        </button>
        <button class="btn-action btn-like" (click)="onLike($event)">
            <span>â™¥</span>
        </button>
    </div>
</div>