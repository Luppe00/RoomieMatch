<div class="user-list-container">
    <div *ngIf="!currentUser" class="landing-page">
        <!-- Dark Hero Section -->
        <section class="hero-dark">
            <div class="hero-inner">
                <div class="hero-content">
                    <h1 class="hero-title-large">
                        Find your perfect<br><span class="text-coral">roommate</span>
                    </h1>
                    <p class="hero-description">
                        RoomieMatch is Denmark's platform for finding roommates.
                        Whether you have a room to share or need one - we connect
                        the right people together.
                    </p>
                    <a routerLink="/register" class="btn-cta">
                        Get started now - it's free
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7" />
                        </svg>
                    </a>
                    <div class="hero-features">
                        <div class="hero-feature">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                            <span>Verified profiles</span>
                        </div>
                        <div class="hero-feature">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                            <span>Smart matching</span>
                        </div>
                        <div class="hero-feature">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                            <span>Built-in chat</span>
                        </div>
                    </div>
                </div>
                <div class="hero-phone">
                    <div class="phone-mockup">
                        <div class="phone-screen">
                            <div class="phone-header">
                                <span class="phone-logo">RoomieMatch</span>
                            </div>
                            <div class="phone-card">
                                <div class="card-image">
                                    <img src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=400&h=300&fit=crop"
                                        alt="Cozy room">
                                </div>
                                <div class="card-info">
                                    <div class="card-location">√òsterbro</div>
                                    <div class="card-price">8.500 kr./md</div>
                                </div>
                                <div class="card-title">Bright room with balcony</div>
                                <div class="card-actions">
                                    <div class="action-btn pass">‚úï</div>
                                    <div class="action-btn like">‚ô•</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats Bar -->
        <section class="stats-bar">
            <div class="stats-inner">
                <div class="stat-item">
                    <span class="stat-number-large">+2,500</span>
                    <span class="stat-text">Active listings</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number-large">+150</span>
                    <span class="stat-text">New every week</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number-large">+10,000</span>
                    <span class="stat-text">Successful matches</span>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section class="how-section">
            <h2 class="section-heading">How RoomieMatch Works</h2>
            <p class="section-subheading">Find your next roommate in three simple steps</p>
            <div class="steps-grid">
                <div class="step-card">
                    <div class="step-number">01</div>
                    <h3>Create your profile</h3>
                    <p>Tell us about yourself and what you're looking for in a roommate or room.</p>
                </div>
                <div class="step-card">
                    <div class="step-number">02</div>
                    <h3>Browse matches</h3>
                    <p>Swipe through profiles that match your preferences. Like the ones you're interested in.</p>
                </div>
                <div class="step-card">
                    <div class="step-number">03</div>
                    <h3>Connect & chat</h3>
                    <p>When you both like each other, it's a match! Start chatting and arrange a meetup.</p>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="landing-footer">
            <div class="footer-inner">
                <div class="footer-brand">
                    <span class="footer-logo">RoomieMatch</span>
                    <p>Denmark's platform for finding the perfect roommate.</p>
                </div>
                <div class="footer-nav">
                    <div class="footer-col">
                        <h4>Company</h4>
                        <a href="#">About Us</a>
                        <a href="#">How It Works</a>
                        <a href="#">Contact</a>
                    </div>
                    <div class="footer-col">
                        <h4>Legal</h4>
                        <a href="#">Privacy Policy</a>
                        <a href="#">Terms of Service</a>
                        <a href="#">Cookie Policy</a>
                    </div>
                    <div class="footer-col">
                        <h4>Support</h4>
                        <a href="#">FAQ</a>
                        <a href="#">Help Center</a>
                        <a href="mailto:support@roomiematch.dk">support&#64;roomiematch.dk</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom-bar">
                <p>¬© 2026 RoomieMatch. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <div *ngIf="currentUser" class="explore-section">
        <!-- Explore Header -->
        <div class="explore-header">
            <div class="explore-title">
                <h1>Discover</h1>
                <p>Swipe right to like, left to pass</p>
            </div>
            <div class="explore-counter" *ngIf="potentialMatches.length > 0">
                {{ currentIndex + 1 }} / {{ potentialMatches.length }}
            </div>
        </div>

        <div *ngIf="loading" class="loading">Loading potential roomies...</div>

        <div *ngIf="!loading && currentUserCard" class="card-stack" (click)="openDetailModal(currentUserCard)">
            <app-swipe-card [user]="currentUserCard" (liked)="onLike()" (passed)="onPass()">
            </app-swipe-card>
            <div class="tap-hint">
                <span class="tap-icon">üëÜ</span>
                <span>Tap card for details</span>
            </div>
        </div>

        <div *ngIf="!loading && !currentUserCard" class="empty-state">
            <div class="empty-icon">üëÄ</div>
            <h2>No more potential matches</h2>
            <p>You've seen everyone in your area for now.</p>
            <div class="empty-actions">
                <button class="btn-refresh" (click)="loadUsers()">Check Again</button>
            </div>
        </div>
    </div>

    <div class="match-overlay" *ngIf="matchMessage">
        <div class="match-content">
            {{ matchMessage }}
            <div style="font-size: 3rem; margin: 1rem 0;">üéâ</div>
            <button (click)="closeMatch()" class="btn-primary" style="font-size: 1rem; padding: 0.5rem 1.5rem;">Keep
                Swiping</button>
        </div>
    </div>

    <!-- Room Detail Modal -->
    <div class="detail-modal-overlay" *ngIf="showDetailModal && selectedUser" (click)="closeDetailModal()">
        <div class="detail-modal" (click)="$event.stopPropagation()">
            <!-- Close Button -->
            <button class="modal-close" (click)="closeDetailModal()">√ó</button>

            <!-- Hero Image with Gallery Navigation -->
            <div class="modal-hero" (click)="openLightbox(modalPhotoIndex)">
                <img *ngIf="getCurrentModalPhoto()" [src]="getCurrentModalPhoto()" alt="Room photo">
                <div *ngIf="!getCurrentModalPhoto()" class="no-image-placeholder">
                    <span>üì∑</span>
                    <span>No photos yet</span>
                </div>

                <!-- Photo Navigation Arrows -->
                <button class="gallery-nav gallery-prev" *ngIf="getModalPhotos().length > 1"
                    (click)="prevModalPhoto($event)">
                    ‚Äπ
                </button>
                <button class="gallery-nav gallery-next" *ngIf="getModalPhotos().length > 1"
                    (click)="nextModalPhoto($event)">
                    ‚Ä∫
                </button>

                <!-- Photo Counter -->
                <div class="photo-counter" *ngIf="getModalPhotos().length > 1">
                    {{ modalPhotoIndex + 1 }} / {{ getModalPhotos().length }}
                </div>

                <div class="image-hint" *ngIf="getCurrentModalPhoto()">Click to enlarge</div>
            </div>

            <div class="modal-body">
                <!-- Left Column: Details -->
                <div class="modal-main">
                    <h1 class="room-title">üìç {{ selectedUser.room?.location || 'Location not specified' }}</h1>
                    <p class="room-subtitle" *ngIf="selectedUser.room?.title">{{ selectedUser.room?.title }}</p>
                    <p class="address-note">üîí Full address revealed after matching</p>

                    <div class="room-meta">
                        <div class="meta-item" *ngIf="selectedUser.room?.sizeSqm">
                            <span class="meta-value">{{ selectedUser.room?.sizeSqm }} m¬≤</span>
                            <span class="meta-label">Size</span>
                        </div>
                        <div class="meta-item">
                            <span class="meta-value">{{ selectedUser.room?.rent | currency:'DKK':'symbol':'1.0-0'
                                }}/mo</span>
                            <span class="meta-label">Rent</span>
                        </div>
                        <div class="meta-item" *ngIf="selectedUser.room?.availableFrom">
                            <span class="meta-value">{{ selectedUser.room?.availableFrom | date:'mediumDate' }}</span>
                            <span class="meta-label">Available</span>
                        </div>
                    </div>

                    <div class="section">
                        <h3>About the Room</h3>
                        <p class="description">{{ selectedUser.room?.description || 'No description provided.' }}</p>
                    </div>

                    <div class="section">
                        <h3>About the Renter</h3>
                        <div class="renter-info">
                            <div class="renter-avatar">
                                <img *ngIf="selectedUser.profileImage" [src]="selectedUser.profileImage" alt="Profile">
                                <span *ngIf="!selectedUser.profileImage">{{ selectedUser.firstName?.charAt(0) }}{{
                                    selectedUser.lastName?.charAt(0) }}</span>
                            </div>
                            <div class="renter-details">
                                <span class="renter-name">{{ selectedUser.firstName }} {{ selectedUser.lastName }}, {{
                                    selectedUser.age }}</span>
                                <span class="renter-gender">{{ selectedUser.gender }}</span>
                            </div>
                        </div>
                        <p class="renter-bio">{{ selectedUser.bio || 'No bio provided.' }}</p>
                    </div>
                </div>

                <!-- Right Column: Action Card -->
                <div class="modal-sidebar">
                    <div class="action-card">
                        <div class="price-tag">
                            <span class="price">{{ selectedUser.room?.rent | currency:'DKK':'symbol':'1.0-0' }}</span>
                            <span class="price-period">per month</span>
                        </div>
                        <div class="action-buttons">
                            <button class="btn-pass" (click)="passFromModal()">‚úï Pass</button>
                            <button class="btn-like" (click)="likeFromModal()">‚ô• Like</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Lightbox -->
    <div class="lightbox-overlay" *ngIf="showLightbox && selectedUser?.room?.roomImage" (click)="closeLightbox($event)">
        <button class="lightbox-close" (click)="closeLightbox($event)">√ó</button>
        <img [src]="selectedUser?.room?.roomImage" alt="Room photo full">
    </div>
</div>